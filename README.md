# Project Directory Structure (2025â€‘08)

Below is the **latest layout** after adding the automatic runâ€‘directory helper (`utils/run_helper.py`) and pruning target flags.

```text
.
â”œâ”€ train_multi_tft.py          # fresh train â€“ auto run dirs
â”œâ”€ resume_train.py             # resume from exact checkpoint (epoch & optim)
â”œâ”€ warm_start_train.py         # warmâ€‘start fineâ€‘tune â€“ weights only
â”‚
â”œâ”€ configs/                    # YAML hyperâ€‘params & weights
â”‚  â”œâ”€ model_config.yaml        # model architecture & training flags
â”‚  â”œâ”€ weights_config.yaml      # perâ€‘target loss weights (base)
â”‚  â””â”€ composite_score.yaml     # compositeâ€‘score weight matrix
â”‚
â”œâ”€ data/                       # dataloader & raw parquet/csv
â”‚  â”œâ”€ load_dataset.py          # build TimeSeriesDataSet & DataLoader
â”‚  â””â”€ parquet_merged/          # *.parquet generated by csv2Parquet.py
â”‚
â”œâ”€ model/
â”‚  â””â”€ tft_module.py            # LightningModule wrapping TFT + loss/metric
â”‚
â”œâ”€ utils/
â”‚  â”œâ”€ run_helper.py            # ðŸ”¹ NEW: prepare_run_dirs() auto folder helper
â”‚  â”œâ”€ loss_factory.py          # map target â†’ loss
â”‚  â”œâ”€ metric_factory.py        # map target â†’ torchmetrics
â”‚  â”œâ”€ checkpoint_utils.py      # warmâ€‘start selective load
â”‚  â””â”€ weighted_bce.py          # BCE with auto pos_weight
â”‚
â”œâ”€ callbacks/
â”‚  â””â”€ custom_checkpoint.py     # save topâ€‘k by compositeâ€‘score
â”‚
â”œâ”€ src/                        # data ingestion & feature pipeline
â”‚  â”œâ”€ catch_stocks.py          # stock crawler (legacy)
â”‚  â”œâ”€ ccatch.py                # crypto crawler
â”‚  â”œâ”€ csv2Parquet.py           # csv â†’ parquet converter
â”‚  â”œâ”€ data_fusion.py           # align + merge multiâ€‘period data
â”‚  â”œâ”€ indicating.py            # compute tech indicators (uses indicators.py)
â”‚  â”œâ”€ indicators.py            # MA / RSI / MACD â€¦
â”‚  â”œâ”€ target_config.py         # build 11â€‘target set (binarytrend â€¦)
â”‚  â””â”€ check_merged_data.py     # sanityâ€‘check + visualization
â”‚
â”œâ”€ runs/                       # autoâ€‘generated by run_helper
â”‚  â”œâ”€ train_multi_tft-YYYYMMDD_HHMM/
â”‚  â”‚   â”œâ”€ checkpoints/
â”‚  â”‚   â”œâ”€ lightning_logs/
â”‚  â”‚   â””â”€ configs/
â”‚  â””â”€ â€¦ other runs â€¦
â”‚
â””â”€ README.md (youâ€™re reading)
```

## Key Workflow

1. **Prepare features**

   ```bash
   python src/indicating.py          # add tech indicators
   python src/target_config.py       # build targets (if run standalone)
   python src/data_fusion.py         # merge multiâ€‘period
   ```
2. **Train from scratch**

   ```bash
   python train_multi_tft.py --config configs/model_config.yaml
   ```

   â‡’ artifacts land in `runs/train_multi_tft-*/`
3. **Resume**

   ```bash
   python resume_train.py --config configs/model_config.yaml \
       --ckpt runs/.../checkpoints/last.ckpt
   ```
4. **Warmâ€‘start for new tasks**

   ```bash
   python warm_start_train.py --config configs/model_config.yaml \
       --ckpt runs/.../checkpoints/best-epoch=..ckpt
   ```

---

**Tip:** clean old experiments fast

```bash
rm -r runs/*-202507*
```
